import { db } from '@/db';
import { datasets } from '@/db/schema';

async function main() {
    const sampleDatasets = [
        {
            workspaceId: 1,
            name: 'customer_intents_v1',
            filename: 'customer_intents_v1.csv',
            fileUrl: 's3://echocart-datasets/workspace-1/customer_intents_v1.csv',
            format: 'csv',
            status: 'valid',
            validationReport: { errors: [], warnings: ['Some intents have low training examples'], rowCount: 1500 },
            createdBy: 1,
            createdAt: new Date(Date.now() - 9 * 24 * 60 * 60 * 1000).toISOString(),
            updatedAt: new Date(Date.now() - 9 * 24 * 60 * 60 * 1000).toISOString(),
        },
        {
            workspaceId: 2,
            name: 'sales_training_data',
            filename: 'sales_training_data.json',
            fileUrl: 's3://echocart-datasets/workspace-2/sales_training_data.json',
            format: 'json',
            status: 'trained',
            validationReport: { errors: [], warnings: [], rowCount: 2340 },
            createdBy: 2,
            createdAt: new Date(Date.now() - 8 * 24 * 60 * 60 * 1000).toISOString(),
            updatedAt: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(),
        },
        {
            workspaceId: 3,
            name: 'support_faq',
            filename: 'support_faq.rasa',
            fileUrl: 's3://echocart-datasets/workspace-3/support_faq.rasa',
            format: 'rasa',
            status: 'uploaded',
            validationReport: null,
            createdBy: 3,
            createdAt: new Date(Date.now() - 6 * 24 * 60 * 60 * 1000).toISOString(),
            updatedAt: new Date(Date.now() - 6 * 24 * 60 * 60 * 1000).toISOString(),
        },
        {
            workspaceId: 4,
            name: 'product_queries',
            filename: 'product_queries.nlu',
            fileUrl: 's3://echocart-datasets/workspace-4/product_queries.nlu',
            format: 'nlu',
            status: 'invalid',
            validationReport: { errors: ['missing column: intent'], isValid: false },
            createdBy: 4,
            createdAt: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString(),
            updatedAt: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString(),
        },
        {
            workspaceId: 5,
            name: 'ecommerce_chatbot_v2',
            filename: 'ecommerce_chatbot_v2.csv',
            fileUrl: 's3://echocart-datasets/workspace-5/ecommerce_chatbot_v2.csv',
            format: 'csv',
            status: 'parsing',
            validationReport: { errors: [], warnings: ['Parsing in progress'], rowCount: 0 },
            createdBy: 5,
            createdAt: new Date(Date.now() - 4 * 24 * 60 * 60 * 1000).toISOString(),
            updatedAt: new Date(Date.now() - 4 * 24 * 60 * 60 * 1000).toISOString(),
        },
        {
            workspaceId: 6,
            name: 'customer_feedback_analysis',
            filename: 'customer_feedback_analysis.json',
            fileUrl: 's3://echocart-datasets/workspace-6/customer_feedback_analysis.json',
            format: 'json',
            status: 'valid',
            validationReport: { errors: [], warnings: ['Dataset contains duplicate entries'], rowCount: 890 },
            createdBy: 1,
            createdAt: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString(),
            updatedAt: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString(),
        },
        {
            workspaceId: 7,
            name: 'multilingual_support',
            filename: 'multilingual_support.rasa',
            fileUrl: 's3://echocart-datasets/workspace-7/multilingual_support.rasa',
            format: 'rasa',
            status: 'trained',
            validationReport: { errors: [], warnings: [], rowCount: 3200 },
            createdBy: 2,
            createdAt: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString(),
            updatedAt: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000).toISOString(),
        },
        {
            workspaceId: 8,
            name: 'order_tracking_intents',
            filename: 'order_tracking_intents.nlu',
            fileUrl: 's3://echocart-datasets/workspace-8/order_tracking_intents.nlu',
            format: 'nlu',
            status: 'uploaded',
            validationReport: null,
            createdBy: 3,
            createdAt: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000).toISOString(),
            updatedAt: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000).toISOString(),
        },
        {
            workspaceId: 1,
            name: 'refund_policy_dataset',
            filename: 'refund_policy_dataset.csv',
            fileUrl: 's3://echocart-datasets/workspace-1/refund_policy_dataset.csv',
            format: 'csv',
            status: 'invalid',
            validationReport: { errors: ['missing column: entity', 'invalid format in row 45'], isValid: false },
            createdBy: 4,
            createdAt: new Date(Date.now() - 12 * 60 * 60 * 1000).toISOString(),
            updatedAt: new Date(Date.now() - 12 * 60 * 60 * 1000).toISOString(),
        },
        {
            workspaceId: 2,
            name: 'product_recommendations_v3',
            filename: 'product_recommendations_v3.json',
            fileUrl: 's3://echocart-datasets/workspace-2/product_recommendations_v3.json',
            format: 'json',
            status: 'valid',
            validationReport: { errors: [], warnings: ['Consider adding more training examples for rare intents'], rowCount: 4567 },
            createdBy: 5,
            createdAt: new Date(Date.now() - 6 * 60 * 60 * 1000).toISOString(),
            updatedAt: new Date(Date.now() - 6 * 60 * 60 * 1000).toISOString(),
        },
    ];

    await db.insert(datasets).values(sampleDatasets);
    
    console.log('✅ Datasets seeder completed successfully');
}

main().catch((error) => {
    console.error('❌ Seeder failed:', error);
});